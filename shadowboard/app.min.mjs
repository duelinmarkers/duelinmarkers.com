var c=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}},z=class{static fromArray(t,n){let r=n||new Ft;for(let i=t.length-1;i>=0;--i)r=new rt(t[i],r);return r}[Symbol.iterator](){return new Wn(this)}toArray(){return[...this]}atLeastLength(t){for(let n of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let n of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let n of this)t++;return t}};function $(e,t){return new rt(e,t)}function l(e,t){return z.fromArray(e,t)}var Wn=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Ft)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}},Ft=class extends z{},rt=class extends z{constructor(t,n){super(),this.head=t,this.tail=n}},it=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,n,r){return Ao(this.buffer,t,n,r)}intFromSlice(t,n,r,i){return ko(this.buffer,t,n,r,i)}binaryFromSlice(t,n){return new e(this.buffer.slice(t,n))}sliceAfter(t){return new e(this.buffer.slice(t))}},It=class{constructor(t){this.value=t}};function ko(e,t,n,r,i){let s=0;if(r)for(let o=t;o<n;o++)s=s*256+e[o];else for(let o=n-1;o>=t;o--)s=s*256+e[o];if(i){let u=2**((n-t)*8-1);s>=u&&(s-=u*2)}return s}function Ao(e,t,n,r){let i=new DataView(e.buffer),s=n-t;if(s===8)return i.getFloat64(t,!r);if(s===4)return i.getFloat32(t,!r);{let o=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(o)}}var De=class e extends c{static isResult(t){return t instanceof e}},p=class extends De{constructor(t){super(),this[0]=t}isOk(){return!0}},d=class extends De{constructor(t){super(),this[0]=t}isOk(){return!1}};function v(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!Qr(r)||!Qr(i)||!Co(r,i)||Lo(r,i)||Oo(r,i)||Eo(r,i)||So(r,i)||To(r,i)||jo(r,i))return!1;let o=Object.getPrototypeOf(r);if(o!==null&&typeof o.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[u,a]=vo(r);for(let f of u(r))n.push(a(r,f),a(i,f))}return!0}function vo(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function Lo(e,t){return e instanceof Date&&(e>t||e<t)}function Oo(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function Eo(e,t){return Array.isArray(e)&&e.length!==t.length}function So(e,t){return e instanceof Map&&e.size!==t.size}function To(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function jo(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Qr(e){return typeof e=="object"&&e!==null}function Co(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function Ge(e,t){return t===0?0:e%t}function Re(e,t){return Math.trunc(ei(e,t))}function ei(e,t){return t===0?0:e/t}function Ue(e,t,n,r,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=n,o.function=r,o.fn=r;for(let u in s)o[u]=s[u];return o}var B=class extends c{},q=class extends c{},G=class extends c{};function st(e,t,n){return e?t:n()}var _=class extends c{constructor(t){super(),this[0]=t}},y=class extends c{};function ti(e,t){if(e instanceof _){let n=e[0];return new p(n)}else return new d(t)}function ni(e,t){return e instanceof _?e[0]:t}function Dt(e,t){if(e instanceof _){let n=e[0];return new _(t(n))}else return new y}function ri(e){return e instanceof _?e[0]:new y}function fe(){return si()}function ot(e,t,n){return li(t,n,e)}function No(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=$(i,r)}}}function Po(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return No(r,l([]));{let i=n.head;e=n.tail,t=$(i[0],r)}}}function zo(e){let t=Gt(e);return Po(t,l([]))}function Kn(e){return zo(e)}function Io(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1))e=n.tail,t=r+1;else return r}}function ai(e){return Io(e,0)}function Bo(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=$(i,r)}}}function R(e){return Bo(e,l([]))}function ci(e){if(e.hasLength(0))return new d(void 0);{let t=e.head;return new p(t)}}function Do(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return R(s);{let o=r.head,u=r.tail,a=i(o)?$(o,s):s;e=u,t=i,n=a}}}function ve(e,t){return Do(e,t,l([]))}function Go(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return R(s);{let o=r.head;e=r.tail,t=i,n=$(i(o),s)}}}function L(e,t){return Go(e,t,l([]))}function Ro(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new p(R(s));{let o=r.head,u=r.tail,a=i(o);if(a.isOk()){let f=a[0];e=u,t=i,n=$(f,s)}else{let f=a[0];return new d(f)}}}}function lt(e,t){return Ro(e,t,l([]))}function Vn(e,t){for(;;){let n=e,r=t;if(r<=0)return n;if(n.hasLength(0))return l([]);e=n.tail,t=r-1}}function Uo(e,t,n){for(;;){let r=e,i=t,s=n;if(i<=0)return R(s);if(r.hasLength(0))return R(s);{let u=r.head;e=r.tail,t=i-1,n=$(u,s)}}}function fi(e,t){return Uo(e,t,l([]))}function Ho(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=$(i,r)}}}function pe(e,t){return Ho(R(e),t)}function Jo(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=$(i,r)}}}function Wo(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return R(r);{let i=n.head;e=n.tail,t=Jo(i,r)}}}function Rt(e){return Wo(e,l([]))}function pi(e,t){let n=L(e,t);return Rt(n)}function X(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let o=r.head;e=r.tail,t=s(i,o),n=s}}}function Ko(e,t,n,r){for(;;){let i=e,s=t,o=n,u=r;if(i.hasLength(0))return s;{let a=i.head;e=i.tail,t=o(s,a,u),n=o,r=u+1}}}function Yn(e,t,n){return Ko(e,t,n,0)}function Vo(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new d(void 0);{let i=n.head,s=n.tail,o=r(i);if(o.isOk()){let u=o[0];return new p(u)}else e=s,t=r}}}function di(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(r(i))return!0;e=s,t=r}}}function Zn(e,t){return Vo(e,n=>{let r=n[0],i=n[1];return v(r,t)?new p(i):new d(void 0)})}function _i(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return l([]);{let i=n.head,s=n.tail;if(r(i))e=s,t=r;else return $(i,s)}}}function de(e,t){if(e.isOk()){let n=e[0];return new p(t(n))}else{let n=e[0];return new d(n)}}function Q(e,t){if(e.isOk()){let n=e[0];return new p(n)}else{let n=e[0];return new d(t(n))}}function ee(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new d(n)}}function ut(e,t){return ee(e,t)}function xi(e,t){return e.isOk()?e[0]:t}function Ut(e){return er(e)}function Je(e){return e}function tr(e){return Ai(e)}function bi(e){let n=Ut(e);return Je(n)}function yi(e,t,n){let i=Qn(e),s=Vn(i,t),o=fi(s,n);return bi(o)}function ki(e,t,n){if(n<0)return"";if(t<0){let s=tr(e)+t;return s<0?"":yi(e,s,n)}else return yi(e,t,n)}function Jt(e,t){return t<0?e:ki(e,t,tr(e)-t)}function at(e){let t=ie(e);return Je(t)}var We=class extends c{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}};function nr(e){return ir(e)}function Ke(e){return Ti(e)}function ct(e){return ji(e)}function sl(e){return Ci(e)}function vi(e){return t=>{if(e.hasLength(0))return new d(l([new We("another type",nr(t),l([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new p(s)}else return vi(r)(t)}}}function se(e){return e.isOk()?l([]):e[0]}function Li(e,t){let n=t,r=vi(l([Oe,s=>de(Ke(s),F)])),i=(()=>{let s=r(n);if(s.isOk())return s[0];{let o=l(["<",nr(n),">"]),u=Ut(o);return Je(u)}})();return e.withFields({path:$(i,e.path)})}function Wt(e){return t=>ee(sl(t),n=>{let i=lt(n,e);return Oi(i,s=>Li(s,"*"))})}function Oi(e,t){return Q(e,n=>L(n,t))}function Oe(e){return Si(e)}function N(e,t){return n=>{let r=new We("field","nothing",l([]));return ee(Mi(n,e),i=>{let o=ti(i,l([r])),u=ee(o,t);return Oi(u,a=>Li(a,e))})}}function Ei(e,t,n,r,i){return s=>{let o=t(s),u=n(s),a=r(s),f=i(s);if(o.isOk()&&u.isOk()&&a.isOk()&&f.isOk()){let m=o[0],g=u[0],w=a[0],M=f[0];return new p(e(m,g,w,M))}else{let m=o,g=u,w=a,M=f;return new d(Rt(l([se(m),se(g),se(w),se(M)])))}}}function rr(e,t,n,r,i,s,o){return u=>{let a=t(u),f=n(u),m=r(u),g=i(u),w=s(u),M=o(u);if(a.isOk()&&f.isOk()&&m.isOk()&&g.isOk()&&w.isOk()&&M.isOk()){let P=a[0],ce=f[0],he=m[0],xe=g[0],te=w[0],x=M[0];return new p(e(P,ce,he,xe,te,x))}else{let P=a,ce=f,he=m,xe=g,te=w,x=M;return new d(Rt(l([se(P),se(ce),se(he),se(xe),se(te),se(x)])))}}}var Ni=new WeakMap,sr=new DataView(new ArrayBuffer(8)),or=0;function lr(e){let t=Ni.get(e);if(t!==void 0)return t;let n=or++;return or===2147483647&&(or=0),Ni.set(e,n),n}function ur(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function cr(e){let t=0,n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function Pi(e){sr.setFloat64(0,e);let t=sr.getInt32(0),n=sr.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function ol(e){return cr(e.toString())}function ll(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return lr(e);if(e instanceof Date)return Pi(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+W(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+W(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+ur(W(r),W(i))|0});else{let r=Object.keys(e);for(let i=0;i<r.length;i++){let s=r[i],o=e[s];n=n+ur(W(o),cr(s))|0}}return n}function W(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Pi(e);case"string":return cr(e);case"bigint":return ol(e);case"object":return ll(e);case"symbol":return lr(e);case"function":return lr(e);default:return 0}}var le=5,fr=Math.pow(2,le),ul=fr-1,al=fr/2,cl=fr/4,I=0,oe=1,H=2,Ee=3,pr={type:H,bitmap:0,array:[]};function ft(e,t){return e>>>t&ul}function Yt(e,t){return 1<<ft(e,t)}function fl(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function dr(e,t){return fl(e&t-1)}function K(e,t,n){let r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function pl(e,t,n){let r=e.length,i=new Array(r+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=n;s<r;)i[o++]=e[s++];return i}function ar(e,t){let n=e.length,r=new Array(n-1),i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function zi(e,t,n,r,i,s){let o=W(t);if(o===r)return{type:Ee,hash:o,array:[{type:I,k:t,v:n},{type:I,k:i,v:s}]};let u={val:!1};return pt(_r(pr,e,o,t,n,u),e,r,i,s,u)}function pt(e,t,n,r,i,s){switch(e.type){case oe:return dl(e,t,n,r,i,s);case H:return _r(e,t,n,r,i,s);case Ee:return _l(e,t,n,r,i,s)}}function dl(e,t,n,r,i,s){let o=ft(n,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:oe,size:e.size+1,array:K(e.array,o,{type:I,k:r,v:i})};if(u.type===I)return v(r,u.k)?i===u.v?e:{type:oe,size:e.size,array:K(e.array,o,{type:I,k:r,v:i})}:(s.val=!0,{type:oe,size:e.size,array:K(e.array,o,zi(t+le,u.k,u.v,n,r,i))});let a=pt(u,t+le,n,r,i,s);return a===u?e:{type:oe,size:e.size,array:K(e.array,o,a)}}function _r(e,t,n,r,i,s){let o=Yt(n,t),u=dr(e.bitmap,o);if(e.bitmap&o){let a=e.array[u];if(a.type!==I){let m=pt(a,t+le,n,r,i,s);return m===a?e:{type:H,bitmap:e.bitmap,array:K(e.array,u,m)}}let f=a.k;return v(r,f)?i===a.v?e:{type:H,bitmap:e.bitmap,array:K(e.array,u,{type:I,k:r,v:i})}:(s.val=!0,{type:H,bitmap:e.bitmap,array:K(e.array,u,zi(t+le,f,a.v,n,r,i))})}else{let a=e.array.length;if(a>=al){let f=new Array(32),m=ft(n,t);f[m]=_r(pr,t+le,n,r,i,s);let g=0,w=e.bitmap;for(let M=0;M<32;M++){if(w&1){let P=e.array[g++];f[M]=P}w=w>>>1}return{type:oe,size:a+1,array:f}}else{let f=pl(e.array,u,{type:I,k:r,v:i});return s.val=!0,{type:H,bitmap:e.bitmap|o,array:f}}}}function _l(e,t,n,r,i,s){if(n===e.hash){let o=mr(e,r);if(o!==-1)return e.array[o].v===i?e:{type:Ee,hash:n,array:K(e.array,o,{type:I,k:r,v:i})};let u=e.array.length;return s.val=!0,{type:Ee,hash:n,array:K(e.array,u,{type:I,k:r,v:i})}}return pt({type:H,bitmap:Yt(e.hash,t),array:[e]},t,n,r,i,s)}function mr(e,t){let n=e.array.length;for(let r=0;r<n;r++)if(v(t,e.array[r].k))return r;return-1}function Vt(e,t,n,r){switch(e.type){case oe:return ml(e,t,n,r);case H:return $l(e,t,n,r);case Ee:return hl(e,r)}}function ml(e,t,n,r){let i=ft(n,t),s=e.array[i];if(s!==void 0){if(s.type!==I)return Vt(s,t+le,n,r);if(v(r,s.k))return s}}function $l(e,t,n,r){let i=Yt(n,t);if(!(e.bitmap&i))return;let s=dr(e.bitmap,i),o=e.array[s];if(o.type!==I)return Vt(o,t+le,n,r);if(v(r,o.k))return o}function hl(e,t){let n=mr(e,t);if(!(n<0))return e.array[n]}function $r(e,t,n,r){switch(e.type){case oe:return xl(e,t,n,r);case H:return wl(e,t,n,r);case Ee:return gl(e,r)}}function xl(e,t,n,r){let i=ft(n,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===I){if(!v(s.k,r))return e}else if(o=$r(s,t+le,n,r),o===s)return e;if(o===void 0){if(e.size<=cl){let u=e.array,a=new Array(e.size-1),f=0,m=0,g=0;for(;f<i;){let w=u[f];w!==void 0&&(a[m]=w,g|=1<<f,++m),++f}for(++f;f<u.length;){let w=u[f];w!==void 0&&(a[m]=w,g|=1<<f,++m),++f}return{type:H,bitmap:g,array:a}}return{type:oe,size:e.size-1,array:K(e.array,i,o)}}return{type:oe,size:e.size,array:K(e.array,i,o)}}function wl(e,t,n,r){let i=Yt(n,t);if(!(e.bitmap&i))return e;let s=dr(e.bitmap,i),o=e.array[s];if(o.type!==I){let u=$r(o,t+le,n,r);return u===o?e:u!==void 0?{type:H,bitmap:e.bitmap,array:K(e.array,s,u)}:e.bitmap===i?void 0:{type:H,bitmap:e.bitmap^i,array:ar(e.array,s)}}return v(r,o.k)?e.bitmap===i?void 0:{type:H,bitmap:e.bitmap^i,array:ar(e.array,s)}:e}function gl(e,t){let n=mr(e,t);if(n<0)return e;if(e.array.length!==1)return{type:Ee,hash:e.hash,array:ar(e.array,n)}}function qi(e,t){if(e===void 0)return;let n=e.array,r=n.length;for(let i=0;i<r;i++){let s=n[i];if(s!==void 0){if(s.type===I){t(s.v,s.k);continue}qi(s,t)}}}var we=class e{static fromObject(t){let n=Object.keys(t),r=e.new();for(let i=0;i<n.length;i++){let s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=e.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new e(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;let r=Vt(this.root,0,W(t),t);return r===void 0?n:r.v}set(t,n){let r={val:!1},i=this.root===void 0?pr:this.root,s=pt(i,0,W(t),t,n,r);return s===this.root?this:new e(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let n=$r(this.root,0,W(t),t);return n===this.root?this:n===void 0?e.new():new e(n,this.size-1)}has(t){return this.root===void 0?!1:Vt(this.root,0,W(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){qi(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+ur(W(n),W(r))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=!0;return this.forEach((r,i)=>{n=n&&v(t.get(i,!r),r)}),n}};var yl=void 0,Fi={};function Di(e){return e.toString()}function Ai(e){if(e==="")return 0;let t=Gi(e);if(t){let n=0;for(let r of t)n++;return n}else return e.match(/./gsu).length}function Qn(e){let t=Gi(e);return t?z.fromArray(Array.from(t).map(n=>n.segment)):z.fromArray(e.match(/./gsu))}function Gi(e){if(globalThis.Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function er(e){let t="";for(let n of e)t=t+n;return t}var Ri=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Sc=new RegExp(`^([${Ri}]*)`,"g"),Tc=new RegExp(`([${Ri}]*)$`,"g");function Ui(e){console.log(e)}function Hi(e){typeof process=="object"&&process.stderr?.write?process.stderr.write(e+`
`):typeof Deno=="object"?Deno.stderr.writeSync(new TextEncoder().encode(e+`
`)):console.log(e)}function si(){return we.new()}function Gt(e){return z.fromArray(e.entries())}function oi(e,t){let n=e.get(t,Fi);return n===Fi?new d(yl):new p(n)}function li(e,t,n){return n.set(e,t)}function ir(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof De)return"Result";if(e instanceof z)return"List";if(e instanceof it)return"BitArray";if(e instanceof we)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function dt(e,t){return bl(e,ir(t))}function bl(e,t){return new d(z.fromArray([new We(e,t,z.fromArray([]))]))}function Si(e){return typeof e=="string"?new p(e):dt("String",e)}function Ti(e){return Number.isInteger(e)?new p(e):dt("Int",e)}function ji(e){return typeof e=="boolean"?new p(e):dt("Bool",e)}function Ci(e){return Array.isArray(e)?new p(z.fromArray(e)):e instanceof z?new p(e):dt("List",e)}function Mi(e,t){let n=()=>dt("Dict",e);if(e instanceof we||e instanceof WeakMap||e instanceof Map){let r=oi(e,t);return new p(r.isOk()?new _(r[0]):new y)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?Ii(e,t,()=>new p(new y)):Ii(e,t,n)}function Ii(e,t,n){try{return t in e?new p(new _(e[t])):n()}catch{return n()}}function ie(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return kl(e);if(t==="bigint"||t==="number")return e.toString();if(Array.isArray(e))return`#(${e.map(ie).join(", ")})`;if(e instanceof z)return Ol(e);if(e instanceof It)return Sl(e);if(e instanceof it)return El(e);if(e instanceof c)return Ll(e);if(e instanceof we)return Al(e);if(e instanceof Set)return`//js(Set(${[...e].map(ie).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return vl(e)}function kl(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];switch(r){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}}return t+='"',t}function Al(e){let t="dict.from_list([",n=!0;return e.forEach((r,i)=>{n||(t=t+", "),t=t+"#("+ie(i)+", "+ie(r)+")",n=!1}),t+"])"}function vl(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${ie(s)}: ${ie(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function Ll(e){let t=Object.keys(e).map(n=>{let r=ie(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Ol(e){return`[${e.toArray().map(ie).join(", ")}]`}function El(e){return`<<${Array.from(e.buffer).join(", ")}>>`}function Sl(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function Kt(e){return e>=0?e:e*-1}function F(e){return Di(e)}function Se(e,t){return e>t?e:t}function hr(e,t){return e+t}var Ye=class extends c{constructor(t){super(),this[0]=t}},Te=class extends c{},je=class extends c{},me=class extends c{},Ce=class extends c{},Me=class extends c{},Ne=class extends c{},_t=class extends c{},Pe=class extends c{},ze=class extends c{};function _e(e,t){return[Re(e,t),Ge(e,t)]}var Ki=1e3;var xr=1e6;function Vi(e){return new Ye(e*xr)}var Yi=6e7;var wr=36e8;function Zi(e){return new Ye(e*wr)}var Xi=864e8;var Qi=6048e8;var es=2592e9;var ts=31536e9;function gr(e){let t=e[0],n=Kt(t),r=_e(n,ts),i=r[0],s=r[1],o=_e(s,es),u=o[0],a=o[1],f=_e(a,Qi),m=f[0],g=f[1],w=_e(g,Xi),M=w[0],P=w[1],ce=_e(P,wr),he=ce[0],xe=ce[1],te=_e(xe,Yi),x=te[0],A=te[1],T=_e(A,xr),Z=T[0],tt=T[1],Xr=_e(tt,Ki),wo=Xr[0],go=Xr[1],yo=l([[i,new ze],[u,new Pe],[m,new _t],[M,new Ne],[he,new Me],[x,new Ce],[Z,new me],[wo,new je],[go,new Te]]),bo=ve(yo,nt=>nt[0]>0);return L(bo,nt=>t<0?[-1*nt[0],nt[1]]:nt)}var ql=l([[new ze,ts],[new Pe,es],[new _t,Qi],[new Ne,Xi],[new Me,wr],[new Ce,Yi],[new me,xr],[new je,Ki],[new Te,1]]);function ns(e,t){let n=Zn(ql,t);if(!n.isOk())throw Ue("let_assert","birl/duration",207,"blur_to","Pattern match failed, no pattern matched the value.",{value:n});let r=n[0],i=e[0],s=_e(i,r),o=s[0];return s[1]>=Re(r*2,3)?o+1:o}var rs=l([["Africa/Abidjan",0],["Africa/Algiers",3600],["Africa/Bissau",0],["Africa/Cairo",7200],["Africa/Casablanca",3600],["Africa/Ceuta",3600],["Africa/El_Aaiun",3600],["Africa/Johannesburg",7200],["Africa/Juba",7200],["Africa/Khartoum",7200],["Africa/Lagos",3600],["Africa/Maputo",7200],["Africa/Monrovia",0],["Africa/Nairobi",10800],["Africa/Ndjamena",3600],["Africa/Sao_Tome",0],["Africa/Tripoli",7200],["Africa/Tunis",3600],["Africa/Windhoek",7200],["America/Adak",-36e3],["America/Anchorage",-32400],["America/Araguaina",-10800],["America/Argentina/Buenos_Aires",-10800],["America/Argentina/Catamarca",-10800],["America/Argentina/Cordoba",-10800],["America/Argentina/Jujuy",-10800],["America/Argentina/La_Rioja",-10800],["America/Argentina/Mendoza",-10800],["America/Argentina/Rio_Gallegos",-10800],["America/Argentina/Salta",-10800],["America/Argentina/San_Juan",-10800],["America/Argentina/San_Luis",-10800],["America/Argentina/Tucuman",-10800],["America/Argentina/Ushuaia",-10800],["America/Asuncion",-14400],["America/Bahia",-10800],["America/Bahia_Banderas",-21600],["America/Barbados",-14400],["America/Belem",-10800],["America/Belize",-21600],["America/Boa_Vista",-14400],["America/Bogota",-18e3],["America/Boise",-25200],["America/Cambridge_Bay",-25200],["America/Campo_Grande",-14400],["America/Cancun",-18e3],["America/Caracas",-14400],["America/Cayenne",-10800],["America/Chicago",-21600],["America/Chihuahua",-21600],["America/Ciudad_Juarez",-25200],["America/Costa_Rica",-21600],["America/Cuiaba",-14400],["America/Danmarkshavn",0],["America/Dawson",-25200],["America/Dawson_Creek",-25200],["America/Denver",-25200],["America/Detroit",-18e3],["America/Edmonton",-25200],["America/Eirunepe",-18e3],["America/El_Salvador",-21600],["America/Fort_Nelson",-25200],["America/Fortaleza",-10800],["America/Glace_Bay",-14400],["America/Goose_Bay",-14400],["America/Grand_Turk",-18e3],["America/Guatemala",-21600],["America/Guayaquil",-18e3],["America/Guyana",-14400],["America/Halifax",-14400],["America/Havana",-18e3],["America/Hermosillo",-25200],["America/Indiana/Indianapolis",-18e3],["America/Indiana/Knox",-21600],["America/Indiana/Marengo",-18e3],["America/Indiana/Petersburg",-18e3],["America/Indiana/Tell_City",-21600],["America/Indiana/Vevay",-18e3],["America/Indiana/Vincennes",-18e3],["America/Indiana/Winamac",-18e3],["America/Inuvik",-25200],["America/Iqaluit",-18e3],["America/Jamaica",-18e3],["America/Juneau",-32400],["America/Kentucky/Louisville",-18e3],["America/Kentucky/Monticello",-18e3],["America/La_Paz",-14400],["America/Lima",-18e3],["America/Los_Angeles",-28800],["America/Maceio",-10800],["America/Managua",-21600],["America/Manaus",-14400],["America/Martinique",-14400],["America/Matamoros",-21600],["America/Mazatlan",-25200],["America/Menominee",-21600],["America/Merida",-21600],["America/Metlakatla",-32400],["America/Mexico_City",-21600],["America/Miquelon",-10800],["America/Moncton",-14400],["America/Monterrey",-21600],["America/Montevideo",-10800],["America/New_York",-18e3],["America/Nome",-32400],["America/Noronha",-7200],["America/North_Dakota/Beulah",-21600],["America/North_Dakota/Center",-21600],["America/North_Dakota/New_Salem",-21600],["America/Nuuk",-7200],["America/Ojinaga",-21600],["America/Panama",-18e3],["America/Paramaribo",-10800],["America/Phoenix",-25200],["America/Port-au-Prince",-18e3],["America/Porto_Velho",-14400],["America/Puerto_Rico",-14400],["America/Punta_Arenas",-10800],["America/Rankin_Inlet",-21600],["America/Recife",-10800],["America/Regina",-21600],["America/Resolute",-21600],["America/Rio_Branco",-18e3],["America/Santarem",-10800],["America/Santiago",-14400],["America/Santo_Domingo",-14400],["America/Sao_Paulo",-10800],["America/Scoresbysund",-7200],["America/Sitka",-32400],["America/St_Johns",-12600],["America/Swift_Current",-21600],["America/Tegucigalpa",-21600],["America/Thule",-14400],["America/Tijuana",-28800],["America/Toronto",-18e3],["America/Vancouver",-28800],["America/Whitehorse",-25200],["America/Winnipeg",-21600],["America/Yakutat",-32400],["Antarctica/Casey",28800],["Antarctica/Davis",25200],["Antarctica/Macquarie",36e3],["Antarctica/Mawson",18e3],["Antarctica/Palmer",-10800],["Antarctica/Rothera",-10800],["Antarctica/Troll",0],["Antarctica/Vostok",18e3],["Asia/Almaty",18e3],["Asia/Amman",10800],["Asia/Anadyr",43200],["Asia/Aqtau",18e3],["Asia/Aqtobe",18e3],["Asia/Ashgabat",18e3],["Asia/Atyrau",18e3],["Asia/Baghdad",10800],["Asia/Baku",14400],["Asia/Bangkok",25200],["Asia/Barnaul",25200],["Asia/Beirut",7200],["Asia/Bishkek",21600],["Asia/Chita",32400],["Asia/Choibalsan",28800],["Asia/Colombo",19800],["Asia/Damascus",10800],["Asia/Dhaka",21600],["Asia/Dili",32400],["Asia/Dubai",14400],["Asia/Dushanbe",18e3],["Asia/Famagusta",7200],["Asia/Gaza",7200],["Asia/Hebron",7200],["Asia/Ho_Chi_Minh",25200],["Asia/Hong_Kong",28800],["Asia/Hovd",25200],["Asia/Irkutsk",28800],["Asia/Jakarta",25200],["Asia/Jayapura",32400],["Asia/Jerusalem",7200],["Asia/Kabul",16200],["Asia/Kamchatka",43200],["Asia/Karachi",18e3],["Asia/Kathmandu",20700],["Asia/Khandyga",32400],["Asia/Kolkata",19800],["Asia/Krasnoyarsk",25200],["Asia/Kuching",28800],["Asia/Macau",28800],["Asia/Magadan",39600],["Asia/Makassar",28800],["Asia/Manila",28800],["Asia/Nicosia",7200],["Asia/Novokuznetsk",25200],["Asia/Novosibirsk",25200],["Asia/Omsk",21600],["Asia/Oral",18e3],["Asia/Pontianak",25200],["Asia/Pyongyang",32400],["Asia/Qatar",10800],["Asia/Qostanay",18e3],["Asia/Qyzylorda",18e3],["Asia/Riyadh",10800],["Asia/Sakhalin",39600],["Asia/Samarkand",18e3],["Asia/Seoul",32400],["Asia/Shanghai",28800],["Asia/Singapore",28800],["Asia/Srednekolymsk",39600],["Asia/Taipei",28800],["Asia/Tashkent",18e3],["Asia/Tbilisi",14400],["Asia/Tehran",12600],["Asia/Thimphu",21600],["Asia/Tokyo",32400],["Asia/Tomsk",25200],["Asia/Ulaanbaatar",28800],["Asia/Urumqi",21600],["Asia/Ust-Nera",36e3],["Asia/Vladivostok",36e3],["Asia/Yakutsk",32400],["Asia/Yangon",23400],["Asia/Yekaterinburg",18e3],["Asia/Yerevan",14400],["Atlantic/Azores",-3600],["Atlantic/Bermuda",-14400],["Atlantic/Canary",0],["Atlantic/Cape_Verde",-3600],["Atlantic/Faroe",0],["Atlantic/Madeira",0],["Atlantic/South_Georgia",-7200],["Atlantic/Stanley",-10800],["Australia/Adelaide",34200],["Australia/Brisbane",36e3],["Australia/Broken_Hill",34200],["Australia/Darwin",34200],["Australia/Eucla",31500],["Australia/Hobart",36e3],["Australia/Lindeman",36e3],["Australia/Lord_Howe",37800],["Australia/Melbourne",36e3],["Australia/Perth",28800],["Australia/Sydney",36e3],["CET",3600],["CST6CDT",-21600],["EET",7200],["EST",-18e3],["EST5EDT",-18e3],["Etc/GMT",0],["Etc/GMT+1",-3600],["Etc/GMT+10",-36e3],["Etc/GMT+11",-39600],["Etc/GMT+12",-43200],["Etc/GMT+2",-7200],["Etc/GMT+3",-10800],["Etc/GMT+4",-14400],["Etc/GMT+5",-18e3],["Etc/GMT+6",-21600],["Etc/GMT+7",-25200],["Etc/GMT+8",-28800],["Etc/GMT+9",-32400],["Etc/GMT-1",3600],["Etc/GMT-10",36e3],["Etc/GMT-11",39600],["Etc/GMT-12",43200],["Etc/GMT-13",46800],["Etc/GMT-14",50400],["Etc/GMT-2",7200],["Etc/GMT-3",10800],["Etc/GMT-4",14400],["Etc/GMT-5",18e3],["Etc/GMT-6",21600],["Etc/GMT-7",25200],["Etc/GMT-8",28800],["Etc/GMT-9",32400],["Etc/UTC",0],["Europe/Andorra",3600],["Europe/Astrakhan",14400],["Europe/Athens",7200],["Europe/Belgrade",3600],["Europe/Berlin",3600],["Europe/Brussels",3600],["Europe/Bucharest",7200],["Europe/Budapest",3600],["Europe/Chisinau",7200],["Europe/Dublin",3600],["Europe/Gibraltar",3600],["Europe/Helsinki",7200],["Europe/Istanbul",10800],["Europe/Kaliningrad",7200],["Europe/Kirov",10800],["Europe/Kyiv",7200],["Europe/Lisbon",0],["Europe/London",0],["Europe/Madrid",3600],["Europe/Malta",3600],["Europe/Minsk",10800],["Europe/Moscow",10800],["Europe/Paris",3600],["Europe/Prague",3600],["Europe/Riga",7200],["Europe/Rome",3600],["Europe/Samara",14400],["Europe/Saratov",14400],["Europe/Simferopol",10800],["Europe/Sofia",7200],["Europe/Tallinn",7200],["Europe/Tirane",3600],["Europe/Ulyanovsk",14400],["Europe/Vienna",3600],["Europe/Vilnius",7200],["Europe/Volgograd",10800],["Europe/Warsaw",3600],["Europe/Zurich",3600],["HST",-36e3],["Indian/Chagos",21600],["Indian/Maldives",18e3],["Indian/Mauritius",14400],["MET",3600],["MST",-25200],["MST7MDT",-25200],["PST8PDT",-28800],["Pacific/Apia",46800],["Pacific/Auckland",43200],["Pacific/Bougainville",39600],["Pacific/Chatham",45900],["Pacific/Easter",-21600],["Pacific/Efate",39600],["Pacific/Fakaofo",46800],["Pacific/Fiji",43200],["Pacific/Galapagos",-21600],["Pacific/Gambier",-32400],["Pacific/Guadalcanal",39600],["Pacific/Guam",36e3],["Pacific/Honolulu",-36e3],["Pacific/Kanton",46800],["Pacific/Kiritimati",50400],["Pacific/Kosrae",39600],["Pacific/Kwajalein",43200],["Pacific/Marquesas",-34200],["Pacific/Nauru",43200],["Pacific/Niue",-39600],["Pacific/Norfolk",39600],["Pacific/Noumea",39600],["Pacific/Pago_Pago",-39600],["Pacific/Palau",32400],["Pacific/Pitcairn",-28800],["Pacific/Port_Moresby",36e3],["Pacific/Rarotonga",-36e3],["Pacific/Tahiti",-36e3],["Pacific/Tarawa",43200],["Pacific/Tongatapu",46800],["WET",0]]);function is(){return Date.now()*1e3}function ss(){return-new Date().getTimezoneOffset()}function os(){return new _(Intl.DateTimeFormat().resolvedOptions().timeZone)}function ls(){return Math.floor(globalThis.performance.now()*1e3)}var mt=class extends c{constructor(t,n,r,i){super(),this.wall_time=t,this.offset=n,this.timezone=r,this.monotonic_time=i}};function cs(e,t){let n=e.wall_time,r=e.monotonic_time,i=t.wall_time,s=t.monotonic_time,o=(()=>{if(r instanceof _&&s instanceof _){let g=r[0],w=s[0];return[g,w]}else return[n,i]})(),u=o[0],a=o[1],f=u===a,m=u<a;return f?new q:m?new B:new G}function Zt(e,t){let n=e.wall_time,r=e.monotonic_time,i=t.wall_time,s=t.monotonic_time,o=(()=>{if(r instanceof _&&s instanceof _){let f=r[0],m=s[0];return[f,m]}else return[n,i]})(),u=o[0],a=o[1];return new Ye(u-a)}function br(e,t){let n=e.wall_time,r=e.offset,i=e.timezone,s=e.monotonic_time,o=t[0];if(s instanceof _){let u=s[0];return new mt(n+o,r,i,new _(u+o))}else return new mt(n+o,r,i,new y)}function $t(){let e=is(),t=ss(),n=ls(),r=os();return new mt(e,t*6e7,(()=>{let i=Dt(r,s=>di(rs,u=>u[0]===s)?new _(s):new y);return ri(i)})(),new _(n))}function ps(e){return Ui(e)}function kr(e){let n=at(e);return Hi(n),e}function Ar(e){return JSON.stringify(e)}function ds(e){return Object.fromEntries(e)}function _s(e){return e.toArray()}function ms(e){try{let t=JSON.parse(e);return new p(t)}catch(t){return new d(Dl(t,e))}}function Dl(e,t){return Gl(e)?new Qt:Rl(e,t)}function Gl(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Rl(e,t){let n=[Ul,Hl,Wl,Jl];for(let r of n){let i=r(e,t);if(i)return i}return new ge("",0)}function Ul(e){let n=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!n)return null;let r=Xt(n[1]);return new ge(r,-1)}function Hl(e){let n=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!n)return null;let r=Xt(n[1]),i=Number(n[2]);return new ge(r,i)}function Jl(e,t){let r=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!r)return null;let i=Number(r[2]),s=Number(r[3]),o=Kl(i,s,t),u=Xt(t[o]);return new ge(u,o)}function Wl(e){let n=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!n)return null;let r=Xt(n[2]);return new ge(r,0)}function Xt(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Kl(e,t,n){if(e===1)return t-1;let r=1,i=0;return n.split("").find((s,o)=>(s===`
`&&(r+=1),r===e?(i=o+t,!0):!1)),i}var Qt=class extends c{},ge=class extends c{constructor(t,n){super(),this.byte=t,this.position=n}};var vr=class extends c{constructor(t){super(),this[0]=t}};function Vl(e,t){return ut(ms(e),n=>{let r=t(n);return Q(r,i=>new vr(i))})}function $s(e,t){return Vl(e,t)}function hs(e){return Ar(e)}function Ze(e){return e}function ht(e){return e}function qe(e){return e}function xt(e){return ds(e)}function Or(e){return _s(e)}function wt(e,t){let r=L(e,t);return Or(r)}var tn=class extends c{constructor(t){super(),this.all=t}};function Yl(e){return new tn(l([t=>e(t.dispatch,t.emit,t.select)]))}function gt(e){return Yl((t,n,r)=>e(t))}function O(){return new tn(l([]))}var Xe=class extends c{constructor(t){super(),this.content=t}},E=class extends c{constructor(t,n,r,i,s,o,u){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}},yt=class extends c{constructor(t){super(),this.subtree=t}};var Qe=class extends c{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}},bt=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}};function Xl(e){if(e instanceof Qe)return new d(void 0);{let t=e[0],n=e[1],r=Jt(t,2);return new p([r,n])}}function xs(e,t,n){return Yn(e,t,(r,i,s)=>{let o=n+"-"+F(s);return ws(i,r,o)})}function ws(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof Xe)return i;if(r instanceof yt){let o=r.subtree;e=o(),t=i,n=s}else if(r instanceof E){let o=r.attrs,u=r.children,a=X(o,i,(f,m)=>{let g=Xl(m);if(g.isOk()){let w=g[0][0],M=g[0][1];return ot(f,s+"-"+w,M)}else return f});return xs(u,a,s)}else{let o=r.elements;return xs(o,i,s)}}}function gs(e){return ws(e,fe(),"0")}function Fe(e,t){return new Qe(e,t,!1)}function bs(e,t){return new bt("on"+e,t)}function ks(e){return Fe("style",X(e,"",(t,n)=>{let r=n[0],i=n[1];return t+r+":"+i+";"}))}function b(e){return Fe("class",e)}function V(e){return Fe("id",e)}function ye(e){return Fe("title",e)}function As(e){return Fe("type",e)}function vs(e){return Fe("value",e)}function Er(e){return Fe("href",e)}function et(e,t,n){return e==="area"?new E("","",e,t,l([]),!1,!0):e==="base"?new E("","",e,t,l([]),!1,!0):e==="br"?new E("","",e,t,l([]),!1,!0):e==="col"?new E("","",e,t,l([]),!1,!0):e==="embed"?new E("","",e,t,l([]),!1,!0):e==="hr"?new E("","",e,t,l([]),!1,!0):e==="img"?new E("","",e,t,l([]),!1,!0):e==="input"?new E("","",e,t,l([]),!1,!0):e==="link"?new E("","",e,t,l([]),!1,!0):e==="meta"?new E("","",e,t,l([]),!1,!0):e==="param"?new E("","",e,t,l([]),!1,!0):e==="source"?new E("","",e,t,l([]),!1,!0):e==="track"?new E("","",e,t,l([]),!1,!0):e==="wbr"?new E("","",e,t,l([]),!1,!0):new E("","",e,t,n,!1,!1)}function Ls(e){return new Xe(e)}var Tr=class extends c{constructor(t){super(),this.dict=t}};function Os(){return new Tr(fe())}var rn=class extends c{constructor(t){super(),this[0]=t}},sn=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},on=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}};function Es(e){return v(e.created,fe())&&v(e.removed,Os())&&v(e.updated,fe())}var ln=class extends c{constructor(t){super(),this[0]=t}},un=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},kt=class extends c{constructor(t){super(),this[0]=t}},ue=class extends c{constructor(t){super(),this[0]=t}},At=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},an=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}};var vt=class extends c{},cn=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},fn=class extends c{constructor(t){super(),this[0]=t}},pn=class extends c{constructor(t){super(),this[0]=t}};function jr(e,t,n){let r,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:u}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),r??=s;else{let a=document.createTextNode(o.content);u.replaceChild(a,s),r??=a}else{let a=document.createTextNode(o.content);u.appendChild(a),r??=a}else if(o.tag!==void 0){let a=ou({prev:s,next:o,dispatch:n,stack:i});s?s!==a&&u.replaceChild(a,s):u.appendChild(a),r??=a}else if(o.elements!==void 0)for(let a of _n(o))i.unshift({prev:s,next:a,parent:u}),s=s?.nextSibling}return r}function ou({prev:e,next:t,dispatch:n,stack:r}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(Lt.has(o))u=Lt.get(o);else{let x=new Map;Lt.set(o,x),u=x}let a=s?new Set(u.keys()):null,f=s?new Set(Array.from(e.attributes,x=>x.name)):null,m=null,g=null,w=null;if(s&&t.tag==="textarea"){let x=t.children[Symbol.iterator]().next().value?.content;x!==void 0&&(o.value=x)}let M=[];for(let x of t.attrs){let A=x[0],T=x[1];if(x.as_property)o[A]!==T&&(o[A]=T),s&&f.delete(A);else if(A.startsWith("on")){let Z=A.slice(2),tt=n(T,Z==="input");u.has(Z)||o.addEventListener(Z,Ot),u.set(Z,tt),s&&a.delete(Z)}else if(A.startsWith("data-lustre-on-")){let Z=A.slice(15),tt=n(lu);u.has(Z)||o.addEventListener(Z,Ot),u.set(Z,tt),o.setAttribute(A,T)}else A.startsWith("delegate:data-")||A.startsWith("delegate:aria-")?(o.setAttribute(A,T),M.push([A.slice(10),T])):A==="class"?m=m===null?T:m+" "+T:A==="style"?g=g===null?T:g+T:A==="dangerous-unescaped-html"?w=T:(o.getAttribute(A)!==T&&o.setAttribute(A,T),(A==="value"||A==="selected")&&(o[A]=T),s&&f.delete(A))}if(m!==null&&(o.setAttribute("class",m),s&&f.delete("class")),g!==null&&(o.setAttribute("style",g),s&&f.delete("style")),s){for(let x of f)o.removeAttribute(x);for(let x of a)u.delete(x),o.removeEventListener(x,Ot)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let x of o.assignedElements())for(let[A,T]of M)x.hasAttribute(A)||x.setAttribute(A,T)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(w!==null)return o.innerHTML=w,o;let P=o.firstChild,ce=null,he=null,xe=null,te=dn(t).next().value;if(s&&te!==void 0&&te.key!==void 0&&te.key!==""){ce=new Set,he=Ss(e),xe=Ss(t);for(let x of dn(t))P=uu(P,x,o,r,xe,he,ce)}else for(let x of dn(t))r.unshift({prev:P,next:x,parent:o}),P=P?.nextSibling;for(;P;){let x=P.nextSibling;o.removeChild(P),P=x}return o}var Lt=new WeakMap;function Ot(e){let t=e.currentTarget;if(!Lt.has(t)){t.removeEventListener(e.type,Ot);return}let n=Lt.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,Ot);return}n.get(e.type)(e)}function lu(e){let t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:n,data:i.reduce((s,o)=>{let u=o.split(".");for(let a=0,f=s,m=e;a<u.length;a++)a===u.length-1?f[u[a]]=m[u[a]]:(f[u[a]]??={},m=m[u[a]],f=f[u[a]]);return s},{data:r})}}function Ss(e){let t=new Map;if(e)for(let n of dn(e)){let r=n?.key||n?.getAttribute?.("data-lustre-key");r&&t.set(r,n)}return t}function uu(e,t,n,r,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let a=e.nextSibling;n.removeChild(e),e=a}if(s.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!u&&e!==null){let a=document.createTextNode("");return n.insertBefore(a,e),r.unshift({prev:a,next:t,parent:n}),e}return!u||u===e?(r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e):(n.insertBefore(u,e),r.unshift({prev:u,next:t,parent:n}),e)}function*dn(e){for(let t of e.children)yield*_n(t)}function*_n(e){if(e.elements!==void 0)for(let t of e.elements)yield*_n(t);else e.subtree!==void 0?yield*_n(e.subtree()):yield e}var Cr=class e{static start({init:t,update:n,view:r},i,s){if(!Nr())return new d(new Et);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new d(new mn(i));let u=new e(o,t(s),n,r);return new p(a=>u.send(a))}constructor(t,[n,r],i,s){this.root=t,this.#e=n,this.#s=i,this.#n=s,this.#t=window.requestAnimationFrame(()=>this.#r(r.all.toArray(),!0))}root;send(t){if(t instanceof kt){if(t[0]instanceof pn){this.#t=window.cancelAnimationFrame(this.#t),this.#i=[],this.#e=t[0][0];let n=this.#n(this.#e),r=(s,o=!1)=>u=>{let a=s(u);a instanceof p&&this.send(new ue(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));jr(i,n,r)}}else if(t instanceof ue){let n=t[0],r=t[1]??!1;this.#i.push(n),r?(this.#t=window.cancelAnimationFrame(this.#t),this.#r()):this.#t||(this.#t=window.requestAnimationFrame(()=>this.#r()))}else if(t instanceof At){let n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof vt)for(this.#t=window.cancelAnimationFrame(this.#t),this.#e=null,this.#s=null,this.#n=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#n;#i=[];#t;#r(t=[],n=!1){if(this.#t=void 0,!this.#o(t,n))return;let r=this.#n(this.#e),i=(o,u=!1)=>a=>{let f=o(a);f instanceof p&&this.send(new ue(f[0],u))},s=this.root.firstChild??this.root.appendChild(document.createTextNode(""));jr(s,r,i)}#o(t=[],n=!1){for(;this.#i.length>0;){let r=this.#i.shift(),[i,s]=this.#s(this.#e,r);n||=this.#e!==i,t=t.concat(s.all.toArray()),this.#e=i}for(;t.length>0;)t.shift()({dispatch:u=>this.send(new ue(u)),emit:(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),select:()=>{}});return this.#i.length>0?this.#o(t,n):n}},Ts=Cr.start;var Mr=class e{static start({init:t,update:n,view:r,on_attribute_change:i},s){let o=new e(t(s),n,r,i);return new p(u=>o.send(u))}constructor([t,n],r,i,s){this.#e=t,this.#s=r,this.#i=i,this.#t=i(t),this.#u=s,this.#r=new Map,this.#o=gs(this.#t),this.#l(n.all.toArray())}send(t){if(t instanceof ln){for(let n of t[0]){let r=this.#u.get(n[0]);if(!r)continue;let i=r(n[1]);i instanceof d||this.#n.push(i)}this.#l()}else if(t instanceof un)this.#n=this.#n.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof kt))if(t instanceof ue)this.#n.push(t[0]),this.#l();else if(t instanceof At){let n=new sn(t[0],t[1]);for(let[r,i]of this.#r)i(n)}else if(t instanceof an){let n=this.#o.get(t[0]);if(!n)return;let r=n(t[1]);if(r instanceof d)return;this.#n.push(r[0]),this.#l()}else if(t instanceof cn){let n=Kn(this.#u),r=new on(n,this.#t);this.#r=this.#r.set(t[0],t[1]),t[1](r)}else t instanceof fn&&(this.#r=this.#r.delete(t[0]))}#e;#s;#n;#i;#t;#r;#o;#u;#l(t=[]){if(!this.#a(!1,t))return;let n=this.#i(this.#e),r=elements(this.#t,n);if(!Es(r)){let i=new rn(r);for(let[s,o]of this.#r)o(i)}this.#t=n,this.#o=r.handlers}#a(t=!1,n=[]){for(;this.#n.length>0;){let r=this.#n.shift(),[i,s]=this.#s(this.#e,r);t||=this.#e!==i,n=n.concat(s.all.toArray()),this.#e=i}for(;n.length>0;)n.shift()({dispatch:u=>this.send(new ue(u)),emit:(u,a)=>this.root.dispatchEvent(new CustomEvent(u,{detail:a,bubbles:!0,composed:!0})),select:()=>{}});return this.#n.length>0?this.#a(t,n):t}},au=Mr.start,Nr=()=>globalThis.window&&window.document;var Pr=class extends c{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=i}};var mn=class extends c{constructor(t){super(),this.selector=t}},Et=class extends c{};function js(e,t,n){return new Pr(e,t,n,new y)}function Cs(e,t,n){return st(!Nr(),new d(new Et),()=>Ts(e,t,n))}function h(e){return Ls(e)}function k(e,t){return et("div",e,t)}function zr(e,t){return et("a",e,t)}function C(e,t){return et("button",e,t)}function Ms(e){return et("input",e,l([]))}function Ns(e,t){return bs(e,t)}function S(e){return Ns("click",t=>new p(e))}function pu(e){let t=e;return N("target",N("value",Oe))(t)}function Ps(e){return Ns("input",t=>{let n=pu(t);return de(n,e)})}function qr(e,t){return globalThis.setTimeout(t,e)}var St=class extends c{constructor(t,n,r,i){super(),this.id=t,this.name=n,this.rounds_total=r,this.rounds_remaining=i}};function Fr(e,t,n){return new St(e,t,n,n)}function Tt(e){return e.withFields({rounds_remaining:Se(0,e.rounds_remaining-1)})}function zs(e){return e.rounds_remaining===0?e.withFields({rounds_remaining:e.rounds_total}):e.withFields({rounds_remaining:Se(0,e.rounds_remaining-1)})}function Ir(e){let t=e.rounds_remaining+1;return e.withFields({rounds_total:Se(e.rounds_total,t),rounds_remaining:t})}function qs(e){return e.rounds_remaining}function Fs(e){return e.rounds_total}function Is(e){return e.rounds_remaining<=0}function $n(e,t){return L(e,n=>n.id===t.id?t:n)}var be=class extends c{constructor(t,n,r){super(),this.name=t,this.expires_at=n,this.last_tick=r}},ae=class extends c{constructor(t,n,r){super(),this.name=t,this.expired_at=n,this.last_tick=r}},jt=class extends c{constructor(t,n){super(),this.name=t,this.remaining=n}};function Bs(e,t){let n=$t();return new be(e,br(n,t),n)}function Ds(e,t){if(t instanceof be){let n=t.name,r=t.expires_at,i=cs(e,r);return i instanceof B?new be(n,r,e):i instanceof q?new ae(n,e,e):new ae(n,r,e)}else if(t instanceof ae){let n=t.name,r=t.expired_at;return new ae(n,r,e)}else return t}function hn(e){return e instanceof ae}function xn(e){return e instanceof jt}function Gs(e){if(e instanceof be){let t=e.name,n=e.expires_at,r=e.last_tick;return new jt(t,Zt(n,r))}else return e}function Rs(e){if(e instanceof jt){let t=e.name,n=e.remaining,r=$t();return new be(t,br(r,n),r)}else return e}function mu(e){return F(e[0])+(()=>{let t=e[1];return t instanceof me?"s":t instanceof Ce?"m":t instanceof Me?"h":t instanceof Ne?"d":t instanceof Pe?"mo":t instanceof ze?"y":t instanceof Te?"us":t instanceof je?"ms":"w"})()}function Dr(e){let n=ns(e,new me),r=Vi(n),i=gr(r),s=ci(i),o=xi(s,[0,new me]);return mu(o)}function Us(e){if(e instanceof be){let t=e.expires_at,n=e.last_tick,r=Zt(t,n);return Dr(r)}else if(e instanceof ae){let t=e.expired_at,n=e.last_tick;return"Expired "+(()=>{let r=Zt(n,t);return Dr(r)})()+" ago"}else{let t=e.remaining;return"Paused at "+Dr(t)}}var Mt=class extends c{constructor(t,n,r,i,s,o){super(),this.light_timer=t,this.players=n,this.turn=r,this.gm_round_timers=i,this.risk_level=s,this.random_encounter_timer=o}},Nt=class extends c{constructor(t,n,r,i,s,o){super(),this.id=t,this.name=n,this.focusing=r,this.light_bearer=i,this.dying=s,this.round_timers=o}},Ie=class extends c{constructor(t){super(),this.player=t}},$e=class extends c{},Y=class extends c{},ke=class extends c{},Pt=class extends c{};function Js(e){return e instanceof Y?"Unsafe":e instanceof ke?"Risky":"Deadly"}function Ws(e){return e==="Unsafe"?new _(new Y):e==="Risky"?new _(new ke):e==="Deadly"?new _(new Pt):new y}function $u(e){return new Nt((()=>{let t=e.players,n=L(t,i=>i.id),r=X(n,0,Se);return hr(r,1)})(),"Player "+F(ai(e.players)+1),!1,!1,!1,l([]))}function Ct(e){let t=pe(e.players,l([$u(e)]));return e.withFields({players:t})}function hu(){return Bs("Light",Zi(1))}function wn(e){return e.withFields({light_timer:new _(hu())})}function Ks(e,t){let n=e.light_timer;if(n instanceof y)return e;{let r=n[0],i=Ds(t,r);return e.withFields({light_timer:new _(i),players:(()=>{if(hn(i)){let o=e.players;return L(o,u=>u.withFields({light_bearer:!1}))}else return e.players})()})}}function gn(e,t){return e.withFields({players:L(e.players,n=>n.id===t.id?t:n)})}function Vs(e){let t=(()=>{let r=e.turn;if(r instanceof $e){let i=e.players;if(i.atLeastLength(1)){let s=i.head;return new Ie(s)}else return new $e}else{let i=r.player,s=_i(e.players,o=>o.id!==i.id);if(s.atLeastLength(2)){let o=s.tail.head;return new Ie(o)}else return new $e}})();return(()=>{if(t instanceof $e)return e.withFields({gm_round_timers:L(e.gm_round_timers,Tt),random_encounter_timer:zs(e.random_encounter_timer)});{let r=t.player;return gn(e,r.withFields({round_timers:L(r.round_timers,Tt)}))}})().withFields({turn:t})}function Ys(e,t){return e.withFields({turn:t})}function Zs(e,t){return Fr((()=>{let n=e.players,r=pi(n,u=>u.round_timers),i=pe(r,e.gm_round_timers),s=L(i,u=>u.id),o=X(s,0,Se);return hr(o,1)})(),"",t)}function Gr(e,t,n){return gn(e,t.withFields({round_timers:n(t.round_timers)}))}function Xs(e,t,n){return Gr(e,t,r=>$(Zs(e,n),r))}function Qs(e,t,n){return Gr(e,t,r=>ve(r,i=>i.id!==n.id))}function eo(e,t,n,r){return Gr(e,t,i=>$n(i,r(n)))}function to(e,t,n){return eo(e,t,n,Tt)}function no(e,t,n){return eo(e,t,n,Ir)}function ro(e,t){return e.withFields({gm_round_timers:$(Zs(e,t),e.gm_round_timers)})}function io(e,t){return e.withFields({gm_round_timers:ve(e.gm_round_timers,n=>n.id!==t.id)})}function so(e,t){return e.withFields({gm_round_timers:$n(e.gm_round_timers,Tt(t))})}function oo(e,t){return e.withFields({gm_round_timers:$n(e.gm_round_timers,Ir(t))})}function lo(e){return Fr(0,"Random Encounter",e instanceof Y?2:e instanceof ke?1:0)}function yn(){let e=new Mt(new y,l([]),new $e,l([]),new Y,lo(new Y)),t=Ct(e),n=Ct(t);return Ct(n)}function uo(e,t){return e.withFields({risk_level:t,random_encounter_timer:lo(t)})}function Ur(e){return Ei((t,n,r,i)=>new St(t,n,r,i),N("id",Ke),N("name",Oe),N("rounds_total",Ke),N("rounds_remaining",Ke))(e)}function xu(e){return rr((t,n,r,i,s,o)=>new Nt(t,n,r,i,s,o),N("id",Ke),N("name",Oe),N("focusing",ct),N("light_bearer",ct),N("dying",ct),N("round_timers",Wt(Ur)))(e)}function wu(e){let n=Oe(e),r=de(n,Ws);return de(r,i=>ni(i,new Y))}function ao(e){let t=yn(),n=rr((r,i,s,o,u,a)=>new Mt(r,i,s,o,u,a),r=>new p(t.light_timer),N("players",Wt(xu)),r=>new p(t.turn),N("gm_round_timers",Wt(Ur)),N("risk_level",wu),N("random_encounter_timer",Ur));return $s(e,n)}function yu(e){let n=Js(e);return Ze(n)}function Hr(e){return xt(l([["id",(()=>{let t=e.id;return qe(t)})()],["name",(()=>{let t=e.name;return Ze(t)})()],["rounds_total",(()=>{let t=e.rounds_total;return qe(t)})()],["rounds_remaining",(()=>{let t=e.rounds_remaining;return qe(t)})()]]))}function bu(e){return xt(l([["id",(()=>{let t=e.id;return qe(t)})()],["name",(()=>{let t=e.name;return Ze(t)})()],["focusing",(()=>{let t=e.focusing;return ht(t)})()],["light_bearer",(()=>{let t=e.light_bearer;return ht(t)})()],["dying",(()=>{let t=e.dying;return ht(t)})()],["round_timers",(()=>{let t=e.round_timers;return wt(t,Hr)})()]]))}function ku(e){return xt(l([["players",(()=>{let t=e.players;return wt(t,bu)})()],["gm_round_timers",(()=>{let t=e.gm_round_timers;return wt(t,Hr)})()],["risk_level",yu(e.risk_level)],["random_encounter_timer",Hr(e.random_encounter_timer)]]))}function co(e){let n=ku(e);return hs(n)}function Jr(){try{return globalThis.Storage&&globalThis.localStorage instanceof globalThis.Storage?new p(globalThis.localStorage):new d(null)}catch{return new d(null)}}function Wr(e,t){return vu(e.getItem(t))}function Kr(e,t,n){try{return e.setItem(t,n),new p(null)}catch{return new d(null)}}function vu(e){return e!==null?new p(e):new d(null)}function fo(){let e=Jr();return Q(e,t=>"Local storage not available")}function Ou(e,t){return ee(fo(),n=>{let r=Kr(n,t,e);return Q(r,i=>"Storage full?")})}function po(e,t,n){return gt(r=>{let i=Ou(e,t),s=n(i);return r(s)})}function Eu(e){return ee(fo(),t=>{let n=Wr(t,e);return Q(n,r=>e+" not found")})}function _o(e,t){return gt(n=>{let r=Eu(e),i=t(r);return n(i)})}var kn=class extends c{constructor(t,n){super(),this.game=t,this.editing=n}},An=class extends c{constructor(t){super(),this[0]=t}},vn=class extends c{},Ln=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},On=class extends c{constructor(t){super(),this[0]=t}},En=class extends c{},Sn=class extends c{constructor(t){super(),this[0]=t}},Tn=class extends c{},jn=class extends c{constructor(t){super(),this[0]=t}},Cn=class extends c{constructor(t){super(),this[0]=t}},Mn=class extends c{constructor(t){super(),this[0]=t}},qt=class extends c{},Nn=class extends c{},Pn=class extends c{},zn=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},qn=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},Fn=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},In=class extends c{constructor(t,n){super(),this[0]=t,this[1]=n}},Bn=class extends c{constructor(t){super(),this[0]=t}},Dn=class extends c{constructor(t){super(),this[0]=t}},Gn=class extends c{constructor(t){super(),this[0]=t}},Rn=class extends c{constructor(t){super(),this[0]=t}},Zr=class extends c{constructor(t){super(),this[0]=t}},Un=class extends c{constructor(t){super(),this[0]=t}},Hn=class extends c{constructor(t){super(),this[0]=t}},Jn=class extends c{constructor(t,n,r,i){super(),this.add=t,this.inc=n,this.dec=r,this.remove=i}};function D(e,t){return e.withFields({game:t(e.game)})}function bn(e,t){return t.withFields({game:gn(t.game,e)})}function zt(){return gt(e=>{qr(250,()=>{e(new An($t()))})})}function Tu(e){return e instanceof Y?"Unsafe":e instanceof ke?"Risky":"Deadly"}function Vr(e,t){return C(l([S(new Zr(e)),b(v(t.risk_level,e)?"selected":"unselected")]),l([h(Tu(e))]))}function Yr(e,t){let n=qs(e.random_encounter_timer),r=Fs(e.random_encounter_timer),i=n===t,s=r<t;return i?"current":!i&&s?"disabled":"just-whatever"}function ju(e){let t=e.game.light_timer;if(t instanceof y)return k(l([V("light-timer")]),l([C(l([S(new qt)]),l([h("Start Light Timer")]))]));{let n=t[0];return k(l([V("light-timer"),b(hn(n)?"expired":"running")]),l([k(l([b("button-row")]),l([C(l([S(new Nn)]),l([h("Clear")])),C(l([S(new Pn)]),l([h(xn(n)?"Resume":"Pause")])),C(l([S(new qt)]),l([h("Restart")]))])),k(l([b("description")]),l([k(l([]),l([h(Us(n))]))]))]))}}function Cu(e,t){return k(l([b("timer"),b(Is(t)?"expired":"running")]),l([k(l([b("description")]),l([k(l([]),l([h((()=>{let n=t.rounds_remaining;return F(n)})()),h(" / "),h((()=>{let n=t.rounds_total;return F(n)})())]))])),k(l([b("button-row")]),l([C(l([S(e.inc(t)),ye("add 1 round")]),l([h("+")])),C(l([S(e.dec(t)),ye("subtract 1 round")]),l([h("-")])),C(l([S(e.remove(t)),ye("remove timer")]),l([h("X")]))]))]))}function $o(e,t){return k(l([b("round-timers")]),$(k(l([b("button-row")]),l([C(l([S(e.add(1))]),l([h("\u23F2\uFE0F1")])),C(l([S(e.add(5))]),l([h("\u23F2\uFE0F5")])),C(l([S(e.add(10))]),l([h("\u23F2\uFE0F10")]))])),L(t,r=>Cu(e,r))))}function mo(e){let t=e.game;return L(t.players,n=>{let r=l(["player"]),i=(()=>{let a=t.turn;if(a instanceof Ie&&a.player.id===n.id){let f=a.player;return $("current-turn",r)}else return r})(),s=n.focusing?$("focusing",i):i,o=n.light_bearer?$("light-bearer",s):s,u=n.dying?$("dying",o):o;return k(L(u,b),l([k(l([b("name")]),l([e.editing?Ms(l([As("text"),vs(n.name),Ps(f=>new Ln(n,f))])):k(l([S(new Sn(new Ie(n))),ks(l([["cursor","pointer"]])),ye("Jump current turn")]),l([h(n.name)]))])),k(l([b("button-row"),b("primary-toggles")]),l([C(l([b("light-bearer"),ye(n.light_bearer?"Light-Bearer":"Not carrying a light"),S(new jn(n))]),l([h("\u{1F525}")])),C(l([b("focusing"),ye(n.focusing?"Focusing":"Not focusing"),S(new Cn(n))]),l([h("\u{1F4AD}")])),C(l([b("dying"),ye(n.dying?"Dying":"Not dying"),S(new Mn(n))]),l([h("\u{1F480}")]))])),$o(new Jn(a=>new zn(n,a),a=>new In(n,a),a=>new Fn(n,a),a=>new qn(n,a)),n.round_timers),e.editing?C(l([S(new On(n))]),l([h("Remove")])):h("")]))})}function Mu(e){let t=e.game,n=t.turn instanceof $e?l([b("current-turn")]):l([]);return k($(V("gm-bar"),n),l([k(l([V("random-encounter-timer")]),l([k(l([b("button-row")]),l([Vr(new Y,t),Vr(new ke,t),Vr(new Pt,t)])),k(l([b("indicator")]),l([k(l([b("item"),b(Yr(t,2))]),l([h("\u25CF")])),k(l([b("item"),b(Yr(t,1))]),l([h("\u25CF")])),k(l([V("random-encounter-now"),b("item"),b(Yr(t,0))]),l([h("\u{1F3B2}")]))]))])),$o(new Jn(r=>new Bn(r),r=>new Rn(r),r=>new Gn(r),r=>new Dn(r)),t.gm_round_timers),ju(e),k(l([V("big-buttons")]),l([C(l([V("toggle-edit"),S(new Tn)]),l([h("Toggle Editing")])),C(l([V("next-turn"),S(new En)]),l([h("Next Turn")]))]))]))}function Nu(){return k(l([V("footer")]),l([h("Made with \u{1FA78} by John D. Hume, "),zr(l([Er("https://www.duelinmarkers.com/")]),l([h("duelinmarkers.com")])),h(", "),zr(l([Er("https://hachyderm.io/@duelinmarkers")]),l([h("hachyderm.io/@duelinmarkers")])),h(".")]))}function Pu(e){return k(l([V("main")]),l([k(l([V("players")]),e.editing?pe(mo(e),l([C(l([S(new vn)]),l([h("Add Player")]))])):mo(e)),Mu(e),Nu()]))}var ho="shadowboard_game:First Table";function zu(e){return[new kn(yn(),!0),_o(ho,n=>new Hn(n))]}function qu(e){let t=e.game,n=co(t);return po(n,ho,r=>new Un(r))}function Be(e,t){let n=D(e,t);return[n,qu(n)]}function Fu(e,t){let n=e.game;if(t instanceof Un){let r=t[0],i=Q(r,kr);return[e,O()]}else if(t instanceof Hn){let r=t[0],i=ee(r,s=>{let u=ao(s);return Q(u,at)});if(i.isOk()){let s=i[0];return ps("Loaded game"),[new kn(s,!1),O()]}else{let s=kr(i);return[e,O()]}}else if(t instanceof An){let r=t[0],i=D(e,o=>Ks(o,r));return v(e.game,i.game)?[e,O()]:[i,zt()]}else{if(t instanceof qt)return[D(e,wn),(()=>{let r=n.light_timer;if(r instanceof y)return zt();{let i=r[0];return xn(i)?zt():O()}})()];if(t instanceof Nn)return[D(e,r=>r.withFields({light_timer:new y,players:(()=>{let i=r.players;return L(i,s=>s.withFields({light_bearer:!1}))})()})),O()];if(t instanceof Pn){let r=n.light_timer,i=(()=>{let s=n.light_timer;return Dt(s,xn)})();if(r instanceof _&&i instanceof _&&i[0]){let s=r[0];return[D(e,o=>o.withFields({light_timer:new _(Rs(s))})),zt()]}else if(r instanceof _){let s=r[0];return[D(e,o=>o.withFields({light_timer:new _(Gs(s))})),O()]}else return[e,O()]}else{if(t instanceof vn)return[D(e,Ct),O()];if(t instanceof On){let r=t[0];return[D(e,i=>i.withFields({players:ve(i.players,s=>s.id!==r.id)})),O()]}else if(t instanceof Ln){let r=t[0],i=t[1];return[bn(r.withFields({name:i}),e),O()]}else if(t instanceof jn){let r=t[0],i=!r.light_bearer,s=(()=>{let a=e.game.light_timer;return i&&a instanceof y?[D(e,wn),zt()]:i&&a instanceof _&&a[0]instanceof ae?[D(e,wn),O()]:[e,O()]})(),o=s[0],u=s[1];return[bn(r.withFields({light_bearer:i}),o),u]}else if(t instanceof Cn){let r=t[0];return[bn(r.withFields({focusing:!r.focusing}),e),O()]}else if(t instanceof Mn){let r=t[0];return[bn(r.withFields({light_bearer:!1,focusing:!1,dying:!r.dying}),e),O()]}else if(t instanceof zn){let r=t[0],i=t[1];return Be(e,s=>Xs(s,r,i))}else if(t instanceof Bn){let r=t[0];return Be(e,i=>ro(i,r))}else{if(t instanceof En)return Be(e,Vs);if(t instanceof Sn){let r=t[0];return Be(e,i=>Ys(i,r))}else{if(t instanceof Tn)return[e.withFields({editing:!e.editing}),O()];if(t instanceof qn){let r=t[0],i=t[1];return Be(e,s=>Qs(s,r,i))}else if(t instanceof Fn){let r=t[0],i=t[1];return[D(e,s=>to(s,r,i)),O()]}else if(t instanceof In){let r=t[0],i=t[1];return[D(e,s=>no(s,r,i)),O()]}else if(t instanceof Dn){let r=t[0];return Be(e,i=>io(i,r))}else if(t instanceof Gn){let r=t[0];return[D(e,i=>so(i,r)),O()]}else if(t instanceof Rn){let r=t[0];return[D(e,i=>oo(i,r)),O()]}else{let r=t[0];return Be(e,i=>uo(i,r))}}}}}}function xo(){let e=js(zu,Fu,Pu),t=Cs(e,"#app",void 0);if(!t.isOk())throw Ue("let_assert","app",29,"main","Pattern match failed, no pattern matched the value.",{value:t})}xo();
